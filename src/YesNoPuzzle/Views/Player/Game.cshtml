@using Microsoft.EntityFrameworkCore.Metadata.Internal
@using YesNoPuzzle.Models
@{
    ViewData["Title"] = "Home Page";
}
@model YesNoPuzzle.Models.GameViewModels.GameViewModel

@{
    <br/>
    <div class="panel panel-default">
        <div class="panel-heading">
            <h2>@Model.Game.GameName</h2>
        </div>
        <div class="panel-body">
            <h4>@Model.Game.GameCondition</h4>
        </div>
    </div>

    <hr/>

    <div id="scroll">
    @if (Model.Questions != null && Model.Questions.Count > 0)
    {
        <h4>Questions:</h4>
        <hr/>
        @foreach (var q in @Model.Questions)
        {
           @if (q.State == 0)
           {
            <div class="alert alert-dismissable">
                @q.Text
                @q.User
                <span class="glyphicon glyphicon-hourglass col-lg-1"></span>
            </div>
           }
           else if (q.State == 1)
           {
            <div class="alert alert-success">
                @q.Text
                <span class="glyphicon glyphicon-ok col-lg-1"></span>
            </div>
           }
           else if (q.State == 2)
           {
            <div class="alert alert-danger">
                @q.Text
                <span class="glyphicon glyphicon-remove col-lg-1"></span>
            </div>
           }
           else if (q.State == 3)
           {
            <div class="alert alert-info">
                @q.Text
                <span class="glyphicon glyphicon-question-sign col-lg-1"></span>
            </div>
           }
            
        }
       
    }
    else
    {
        <h4>No questions yet.</h4>
    }

    @if (Model.Game.GameState == true)
    {
        <form asp-controller="Player" asp-action="AddNewQuestion" method="post" class="form-horizontal">
            <div class="form-group">
                <label> Ask:</label>
                <input type="text" class="form-control" asp-for="@Model.Text"/><br/>
                <input type="hidden" asp-for="@Model.GameId"/>
              
            </div>
            <div class="form-group">
                <button class="btn btn-primary">Ask</button>
            </div>
        </form>
    }
    else
    {
        <h2>Game over:)</h2>

    }
    </div>

    }
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        window.scrollTo(0, document.body.scrollHeight);
    });
</script>